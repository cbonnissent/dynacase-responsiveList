{"version":3,"file":"main-built.js","sources":["RESPONSIVE_LIST/JS/models/document.js","RESPONSIVE_LIST/JS/collections/document.js","RESPONSIVE_LIST/JS/models/search.js","RESPONSIVE_LIST/JS/collections/search.js","RESPONSIVE_LIST/JS/collections/openDocument.js","RESPONSIVE_LIST/JS/views/search.js","RESPONSIVE_LIST/JS/views/searches.js","RESPONSIVE_LIST/JS/views/documentList.js","RESPONSIVE_LIST/JS/views/openDocumentListElement.js","RESPONSIVE_LIST/JS/views/documentWidget.js","RESPONSIVE_LIST/JS/views/openDocument.js","RESPONSIVE_LIST/JS/main.js"],"names":["define","Backbone","Model","extend","idAttribute","defaults","state","viewId","title","isNew","parse","response","properties","_","model","urlTemplate","template","Collection","url","this","initialize","values","options","Error","urlBase","slice","offset","keyWord","nbResult","data","resultMax","documents","reset","prototype","apply","arguments","CollectionDocument","listenTo","prepareDocumentList","set","window","location","pathname","id","collectionInitialized","get","propagateAdd","propagateReset","propagateSync","fetch","currentDocument","trigger","propagateSelected","selectAnotherOne","each","currentModel","collection","newModel","at","index","length","document","View","tagName","render","$el","attr","addClass","text","SearchView","events","change","_addOne","displayDocumentList","empty","append","_addAll","searchView","find","currentSearch","val","documentModel","$","global","click .documentsList__documents__list__element__reload","submit .documentsList__documents__search__form","click .documentElement","currentView","openDocuments","displaySelected","_updateNumber","_needToLoadMore","on","event","preventDefault","updateKeyWord","bind","_resize","modelSelected","$currentDiv","hide","currentSelectedModel","show","reloadSelected","openDocument","$target","currentTarget","add","initid","_getCurrentDiv","list","toJSON","addOne","off","remove","debounce","$loading","is","_isElementVisible","noReload","$elements","height","innerHeight","position","top","el","rect","getBoundingClientRect","left","bottom","documentElement","clientHeight","right","innerWidth","clientWidth","click","click .documentTab__remove","indicateSelected","selected","removeClass","destroy","delete","className","withoutResize","newDocument","parseInt","width","defer","ViewOpenDocumentListElement","ViewDocumentWidget","families","click .openDocuments__openDocumentList","click .openDocuments__createDocument__familyElement","_addDocument","openDocumentIHM","dcp","creatable_family","switchSide","openCreation","viewDocument","viewList","require","CollectionSearch","CollectionOpenDocument","ViewSearches","ViewDocumentList","ViewOpenDocument","toogleLittleMode","toggleClass","search_list","collections","views","searches","ready","documentList"],"mappings":"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","sourcesContent":["define('rsp/models/document',[\n    \"underscore\",\n    \"backbone\"\n], function (_)\n{\n    \"use strict\";\n\n    return Backbone.Model.extend({\n\n        idAttribute: \"initid\",\n\n        defaults: {\n            state: null,\n            viewId : \"!defaultConsultation\",\n            \"title\" : \"Chargement...\"\n        },\n\n        isNew: function ()\n        {\n            return true;\n        },\n\n        parse: function (response)\n        {\n            return response.properties;\n        }\n    });\n});\n","define('rsp/collections/document',[\n    \"underscore\",\n    \"rsp/models/document\",\n    \"backbone\"\n], function (_, model)\n{\n    \"use strict\";\n\n    var urlTemplate = _.template(\"<%= urlBase %>?slice=<%= slice %>&offset=<%= offset %>&keyword=<%= keyWord %>\");\n\n    return Backbone.Collection.extend({\n        \"model\": model,\n\n        url: function dc_url()\n        {\n            return urlTemplate(this);\n        },\n\n        initialize: function dc_initialize(values, options)\n        {\n            if (!options.url) {\n                throw new Error(\"the document model needs an url conf\");\n            }\n            this.urlBase = options.url;\n            this.slice = 10;\n            this.offset = 0;\n            this.keyWord = \"\";\n        },\n\n        parse: function dc_parse(response)\n        {\n            this.nbResult = response.data.resultMax;\n            return response.data.documents;\n        },\n\n        reset : function dc_reset() {\n            this.nbResult = null;\n            this.slice = 10;\n            this.offset = 0;\n            return Backbone.Collection.prototype.reset.apply(this, arguments);\n        }\n\n    });\n});\n","define('rsp/models/search',[\n    \"underscore\",\n    \"rsp/collections/document\",\n    \"backbone\"\n], function (_, CollectionDocument)\n{\n    \"use strict\";\n\n    return Backbone.Model.extend({\n\n        idAttribute: \"initid\",\n\n        initialize: function rsp_init()\n        {\n            this.listenTo(this, \"selected\", this.prepareDocumentList);\n            this.set(\"associatedDocumentList\", new CollectionDocument([], {\n                \"url\": window.location.pathname + \"api/v1/rspl/listDocument/\" + this.id\n            }));\n            this.collectionInitialized = false;\n            this.listenTo(this.get(\"associatedDocumentList\"), \"add\", this.propagateAdd);\n            this.listenTo(this.get(\"associatedDocumentList\"), \"reset\", this.propagateReset);\n            this.listenTo(this.get(\"associatedDocumentList\"), \"sync\", this.propagateSync);\n        },\n\n        parse: function (response)\n        {\n            return response.properties;\n        },\n\n        prepareDocumentList: function ()\n        {\n            if (!this.collectionInitialized) {\n                this.get(\"associatedDocumentList\").fetch();\n            }\n        },\n\n        propagateAdd: function propagateAdd(currentDocument)\n        {\n            this.trigger(\"addDocumentList\", this, this.get(\"associatedDocumentList\"), currentDocument);\n        },\n\n        propagateReset: function propagateReset()\n        {\n            this.trigger(\"resetDocumentList\", this, this.get(\"associatedDocumentList\"));\n        },\n\n        propagateSync: function propagateSync()\n        {\n            this.trigger(\"syncDocumentList\", this, this.get(\"associatedDocumentList\"));\n        }\n    });\n});\n","define('rsp/collections/search',[\n    \"underscore\",\n    \"rsp/models/search\",\n    \"backbone\"\n], function (_, model)\n{\n    \"use strict\";\n\n    return Backbone.Collection.extend({\n        \"url\" : window.location.pathname + \"api/v1/rspl/listDocument/DIR_RESPONSIVE_LIST\",\n        \"model\": model,\n\n        parse : function searchCollection_parse(response) {\n            return response.data.documents;\n        }\n    });\n});\n","define('rsp/collections/openDocument',[\n    \"rsp/models/document\",\n    \"backbone\"\n], function (model)\n{\n\n    \"use strict\";\n\n    return Backbone.Collection.extend({\n        \"model\": model,\n\n        initialize : function odc__initialize() {\n            this.listenTo(this, \"selected\", this.propagateSelected);\n            this.listenTo(this, \"destroy\", this.selectAnotherOne);\n        },\n\n        propagateSelected : function odc__selected(model) {\n            this.each(function odc__isSelected(currentModel) {\n                currentModel.set(\"selected\", model.id === currentModel.id);\n            });\n        },\n\n        selectAnotherOne : function odc_selectAnotherOne(model, collection, options) {\n            var newModel = this.at(options.index) || this.at(options.index - 1);\n            if (model.get(\"selected\")) {\n                if (newModel) {\n                    newModel.trigger(\"selected\", newModel);\n                }\n            }\n            if (this.length === 0) {\n                window.document.title = \"Les documents\";\n            }\n        }\n    });\n});\n","\ndefine('rsp/views/search',[\n    \"underscore\",\n    \"backbone\"\n], function (_)\n{\n    \"use strict\";\n\n    return Backbone.View.extend({\n\n        tagName: \"option\",\n\n        render: function searchView()\n        {\n            this.$el.data(\"searchId\", this.model.id).attr(\"value\", this.model.id).addClass(\"searchElement\").text(this.model.get(\"title\"));\n            return this;\n        }\n\n    });\n});\n","define('rsp/views/searches',[\n    \"underscore\",\n    \"rsp/views/search\",\n    \"backbone\"\n], function (_, SearchView)\n{\n\n    \"use strict\";\n\n    var template = _.template('<select class=\"form-control documentsList__searchList__select\"></select>');\n\n    return Backbone.View.extend({\n\n        tagName: \"form\",\n\n        events: {\n            \"change\": \"displayDocumentList\"\n        },\n\n        initialize: function searches_initialize(options)\n        {\n            if (!options.collection) {\n                throw new Error(\"You need to associate the searches view with a collection\");\n            }\n            this.collection = options.collection;\n            this.listenTo(this.collection, 'add', this._addOne);\n            this.listenTo(this.collection, 'reset', this.render);\n            this.listenTo(this.collection, 'sync', this.displayDocumentList);\n        },\n\n        render: function searches_render()\n        {\n            this.$el.empty().append(template());\n            this._addAll();\n            return this;\n        },\n\n        _addAll: function ()\n        {\n            this.collection.each(this._addOne);\n        },\n\n        _addOne: function (model)\n        {\n            var searchView = new SearchView({model: model});\n            this.$el.find(\".documentsList__searchList__select\").append(searchView.render().$el);\n        },\n\n        displayDocumentList: function ()\n        {\n            var currentSearch = this.$el.find(\".documentsList__searchList__select\").val(), documentModel = this.collection.get(currentSearch);\n            if (documentModel) {\n                documentModel.trigger(\"selected\", documentModel);\n            }\n        }\n    });\n});\n","define('rsp/views/documentList',[\n    \"jquery\",\n    \"underscore\",\n    \"backbone\"\n], function ($, _)\n{\n\n    \"use strict\";\n\n    var template = {\n        \"global\": _.template('<div class=\"documentsList__documents__list__element <%- id %>\">' +\n        '<div class=\"bg-info documentsList__documents__list__element__nbResult clearfix\">' +\n        '<span class=\"documentsList__documents__list__element__nbResult__container\"></span>' +\n        '<button class=\"btn btn-link pull-right documentsList__documents__list__element__reload\"><span class=\"glyphicon glyphicon-repeat pull-right\" aria-hidden=\"true\"></span></button>' +\n        '</div>' +\n        '<div class=\"documentsList__documents__list__elements\">' +\n        '   <div class=\"list-group\"></div>' +\n        '   <div class=\"documentsList__documents__list__elements__loading\">Loading...</div>' +\n        '</div>' +\n        '</div>'),\n        \"document\": _.template('<a href=\"#<%- initid %>\" data-id=\"<%- initid %>\" data-title=\"<%- title %>\" class=\"list-group-item documentElement clearfix\"> ' +\n        '<img src=\"<%- icon %>\" class=\"img-circle documentElement__icon\" /><%- title %>' +\n        '<% if (state) { %> <span class=\"label label-default pull-right documentElement__state\" ' +\n        'style=\"background-color : <%- state.color %>;' +\n            //compute the complementary grey\n        'color : #<%- (\\'000000\\' + ((\\'0xffffff\\' ^ state.color.replace(\"#\", \"0x\")).toString(16))).slice(-6) %>;\">' +\n        '<%- state.displayValue %></span> <% } %>' +\n        '</a>')\n    };\n\n    return Backbone.View.extend({\n\n        events: {\n            \"click .documentsList__documents__list__element__reload\": \"reloadSelected\",\n            \"submit .documentsList__documents__search__form\": \"updateKeyword\",\n            \"click .documentElement\": \"openDocument\"\n        },\n\n        initialize: function dl_initialize(options)\n        {\n            var currentView = this;\n            if (!options.collection) {\n                throw new Error(\"You need to associate the document list view with a collection\");\n            }\n            this.collection = options.collection;\n            this.openDocuments = options.openDocuments;\n            this.listenTo(this.collection, \"selected\", this.displaySelected);\n            this.listenTo(this.collection, \"addDocumentList\", this._addOne);\n            this.listenTo(this.collection, \"resetDocumentList\", this._addAll);\n            this.listenTo(this.collection, \"syncDocumentList\", this._updateNumber);\n            this.listenTo(this.collection, \"syncDocumentList\", this._needToLoadMore);\n            this.$el.find(\".documentsList__documents__search__form\").on(\"submit\", function (event)\n            {\n                event.preventDefault();\n                currentView.updateKeyWord(event);\n            });\n            $(window).on(\"resize\", _.bind(this._resize, this));\n        },\n\n        displaySelected: function dl_displaySelected(modelSelected)\n        {\n            var $currentDiv = this.$el.find(\".\" + modelSelected.id);\n            this.$el.find(\".documentsList__documents__list__element\").hide();\n            if ($currentDiv.length === 0) {\n                this._addAll(modelSelected, modelSelected.get(\"associatedDocumentList\"));\n                $currentDiv = this.$el.find(\".\" + modelSelected.id);\n            }\n            this.currentSelectedModel = modelSelected;\n            this.$el.find(\".documentsList__documents__search__keyWord\").val(this.currentSelectedModel.get(\"associatedDocumentList\").keyWord);\n            $currentDiv.show();\n        },\n\n        reloadSelected: function dl_reloadSelected()\n        {\n            this.currentSelectedModel.get(\"associatedDocumentList\").reset();\n            this.currentSelectedModel.get(\"associatedDocumentList\").fetch();\n        },\n\n        updateKeyWord: function dl_updateKeyWord(event)\n        {\n            event.preventDefault();\n            this.currentSelectedModel.get(\"associatedDocumentList\").reset();\n            this.currentSelectedModel.get(\"associatedDocumentList\").keyWord = this.$el.find(\".documentsList__documents__search__keyWord\").val();\n            this.currentSelectedModel.get(\"associatedDocumentList\").fetch();\n        },\n\n        openDocument: function dl_openDocument(event)\n        {\n            var $target = $(event.currentTarget), id = $target.data(\"id\"), document = this.openDocuments.get(id);\n            event.preventDefault();\n            if (document) {\n                document.trigger(\"selected\", document);\n            } else {\n                this.openDocuments.add({initid: id, title: $target.data(\"title\")});\n            }\n        },\n\n        _getCurrentDiv: function _getCurrentDiv(model)\n        {\n            var $currentDiv = this.$el.find(\".\" + model.id);\n            if ($currentDiv.length === 0) {\n                return false;\n            }\n            return $currentDiv;\n        },\n\n        _addOne: function dl_addOne(model, list, currentDocument)\n        {\n            var $currentDiv = this._getCurrentDiv(model);\n            if ($currentDiv) {\n                $currentDiv.find(\".list-group\").append(template.document(currentDocument.toJSON()));\n            }\n        },\n\n        _addAll: function dl_addAll(model, list)\n        {\n            var addOne = _.bind(this._addOne, this);\n            var $currentDiv = this._getCurrentDiv(model);\n            if ($currentDiv) {\n                $currentDiv.find(\".documentsList__documents__list__elements\").off(\"dl\");\n                $currentDiv.remove();\n            }\n            this.$el.find(\".documentsList__documents__list\").append(template.global(model.toJSON()));\n            this._resize(true);\n            $currentDiv = this._getCurrentDiv(model);\n            if ($currentDiv) {\n                $currentDiv.find(\".documentsList__documents__list__elements\").on(\"scroll.dl\", _.debounce(_.bind(function ()\n                {\n                    this._needToLoadMore(model, list);\n                }, this), 200));\n            }\n            list.each(function (currentDocument)\n            {\n                addOne(model, list, currentDocument);\n            });\n        },\n\n        _updateNumber: function _updateNumber(model, list)\n        {\n            var $currentDiv = this._getCurrentDiv(model), text = \" document\";\n            if ($currentDiv) {\n                if (list.nbResult > 1) {\n                    text = \" documents\";\n                }\n                $currentDiv.find(\".documentsList__documents__list__element__nbResult__container\").text(list.nbResult + text);\n            }\n        },\n\n        _needToLoadMore: function _needToLoadMore(model, list)\n        {\n            var $currentDiv = this._getCurrentDiv(model), $loading, maxLength;\n            //test if need loading element\n            if (!$currentDiv) {\n                return;\n            }\n            $loading = $currentDiv.find(\".documentsList__documents__list__elements__loading\");\n            if (list.nbResult !== null && (list.offset + list.slice >= list.nbResult)) {\n                $loading.remove();\n            }\n            else {\n                if (this.$el.is(\":visible\") && this._isElementVisible($loading)) {\n                    list.offset += list.slice;\n                    list.fetch({remove: false});\n                }\n            }\n        },\n\n        _resize: function _resize(noReload)\n        {\n            var $elements = this.$el.find(\".documentsList__documents__list__elements:visible\");\n            if ($elements.length > 0) {\n                $elements.height($(window).innerHeight() - $elements.position().top);\n            }\n            if (noReload !== true && this.currentSelectedModel) {\n                this._needToLoadMore(this.currentSelectedModel, this.currentSelectedModel.get(\"associatedDocumentList\"));\n            }\n        },\n\n        _isElementVisible: function isElementInViewport(el)\n        {\n            //special bonus for those using jQuery\n            if (typeof $ === \"function\" && el instanceof $) {\n                el = el[0];\n            }\n\n            var rect = el.getBoundingClientRect();\n\n            return (\n            rect.top >= 0 &&\n            rect.left >= 0 &&\n            rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) && /*or $(window).height() */\n            rect.right <= (window.innerWidth || document.documentElement.clientWidth) /*or $(window).width() */\n            );\n        }\n\n    });\n});\n","define('rsp/views/openDocumentListElement',[\n    \"underscore\",\n    \"backbone\"\n], function (_)\n{\n\n    \"use strict\";\n\n    var template = _.template('<a class=\"documentTab\" href=\"#<%- initid %>\" data-id=\"<%- initid %>\" data-title=\"<%- title %>\">' +\n    '<span class=\"documentTab__text\"><%- title %></span>' +\n    '<button type=\"button\" class=\"close documentTab__remove\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>' +\n    '</a>');\n\n    return Backbone.View.extend({\n\n        tagName : \"li\",\n\n        events : {\n            \"click\" : \"selected\",\n            \"click .documentTab__remove\" : \"remove\"\n        },\n\n        initialize : function opde_initialize() {\n            this.listenTo(this.model, \"change:title\", this.render);\n            this.listenTo(this.model, \"change:id\", this.render);\n            this.listenTo(this.model, \"change:selected\", this.indicateSelected);\n            this.listenTo(this.model, \"destroy\", this.delete);\n        },\n\n        render : function opde__render() {\n            this.$el.empty().append(template(this.model.toJSON()));\n            this.$el.attr(\"title\", this.model.get(\"title\"));\n            return this;\n        },\n\n        selected : function opde_selected(event) {\n            event.preventDefault();\n            this.model.trigger(\"selected\", this.model);\n        },\n\n        indicateSelected : function opde__indicateSelected() {\n            if (this.model.get(\"selected\")) {\n                this.$el.addClass(\"active\");\n            } else {\n                this.$el.removeClass(\"active\");\n            }\n        },\n\n        remove : function opde__remove() {\n            this.model.destroy();\n        },\n\n        \"delete\" : function opde_delete() {\n            this.$el.remove();\n        }\n\n    });\n});\n","define('rsp/views/documentWidget',[\n    \"jquery\",\n    \"underscore\",\n    \"dcpDocument/document\",\n    \"backbone\"\n], function ($, _)\n{\n\n    \"use strict\";\n\n    return Backbone.View.extend({\n\n        className: \"documentsWrapper__div\",\n\n        initialize: function opde_initialize()\n        {\n            //this.listenTo(this.model, \"change:initid\", this.render);\n            this.listenTo(this.model, \"change:selected\", this.indicateSelected);\n            this.listenTo(this.model, \"change:title\", this.indicateSelected);\n            this.listenTo(this.model, \"destroy\", this.delete);\n            $(window).on(\"resize\", _.debounce(_.bind(this._resize, this), 100));\n        },\n\n        render: function dw_render()\n        {\n            var currentView = this;\n            this.$el.empty().document({\"initid\": this.model.id, \"viewId\" : this.model.get(\"viewId\"),withoutResize: true});\n            this.$el.document(\"addEvent\", \"ready\", function (event, document)\n            {\n                currentView.model.set(\"initid\", document.initid);\n                currentView.model.set(\"title\", document.title || \"\");\n                currentView.model.set(\"viewId\", document.viewId);\n            });\n            this.$el.document(\"addEvent\", \"beforeClose\", function (event, document, newDocument)\n            {\n                var currentDocument = currentView.model.collection.get(newDocument.initid);\n                if (parseInt(newDocument.initid, 10) === parseInt(currentView.model.get(\"initid\"), 10)) {\n                    currentDocument.trigger(\"selected\", currentDocument);\n                    return;\n                }\n                event.preventDefault();\n                if (currentDocument) {\n                    currentDocument.trigger(\"selected\", currentDocument);\n                } else {\n                    currentView.model.collection.add({initid: newDocument.initid, title: \"Chargement\"});\n                }\n            });\n            return this;\n        },\n\n        indicateSelected: function opde__indicateSelected()\n        {\n            if (this.model.get(\"selected\")) {\n                this.$el.show();\n                window.document.title = this.model.get(\"title\");\n                this._resize();\n            } else {\n                this.$el.hide();\n            }\n        },\n\n        _resize: function opde_resize()\n        {\n            var currentView = this;\n            if (this.$el.is(\":visible\")) {\n                this.$el.find(\"iframe\").height($(window).innerHeight() - this.$el.position().top - 5).width(this.$el.innerWidth());\n                _.defer(function secondHeightResize()\n                {\n                    currentView.$el.find(\"iframe\").height($(window).innerHeight() - currentView.$el.position().top - 5);\n                }, 50);\n            }\n        },\n\n        \"delete\": function opde_delete()\n        {\n            this.$el.remove();\n        }\n\n    });\n});\n","define('rsp/views/openDocument',[\n    \"jquery\",\n    \"underscore\",\n    \"rsp/views/openDocumentListElement\",\n    \"rsp/views/documentWidget\",\n    \"backbone\",\n    \"bootstrap\"\n], function ($, _, ViewOpenDocumentListElement, ViewDocumentWidget)\n{\n\n    \"use strict\";\n\n    var template = {\n        \"global\": _.template('<ul class=\"nav nav-pills documentList\">' +\n        '   <li class=\"openDocuments__openDocumentList visible-xs\">' +\n        '       <button class=\"btn btn-default\"><span class=\"glyphicon glyphicon-menu-hamburger\"></span></button>' +\n        '   </li>' +\n        '   <li class=\"openDocuments__createDocument\">' +\n        '       <div class=\"btn-group\" title=\"CrÃ©er un document\">' +\n        '           <button type=\"button\" class=\"btn btn-success dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\">' +\n        '               Nouveau' +\n        '               <span class=\"glyphicon glyphicon-plus-sign\"></span> <span class=\"caret\"></span>' +\n        '           </button>' +\n        '           <ul class=\"dropdown-menu openDocuments__createDocument__families\" role=\"menu\">' +\n        '           </ul>' +\n        '       </div>' +\n        '   </li>' +\n        '</ul><div class=\"documentsWrapper\"></div> '),\n        \"families\" : _.template('<% _.each(families, function(currentFamily) { %>' +\n        '<li>' +\n        '   <a class=\"openDocuments__createDocument__familyElement\" href=\"#<%- currentFamily.initid %>\" data-initid=\"<%- currentFamily.initid %>\">' +\n        '       <img src=\"<%- currentFamily.icon %>\" class=\"img-circle documentElement__icon\"><%- currentFamily.title %>' +\n        '   </a>' +\n        '</li>' +\n        ' <% }); %>')\n    };\n\n    return Backbone.View.extend({\n\n        events: {\n            \"click .openDocuments__openDocumentList\": \"switchSide\",\n            \"click .openDocuments__createDocument__familyElement\" : \"openCreation\"\n        },\n\n        initialize: function opd_initialize(options)\n        {\n            if (!options.openDocuments) {\n                throw new Error(\"You need an openDocuments collection\");\n            }\n            this.openDocuments = options.openDocuments;\n            this.listenTo(this.openDocuments, \"add\", this._addDocument);\n            this.listenTo(this.openDocuments, \"selected\", this.openDocumentIHM);\n        },\n\n        render: function opd_render()\n        {\n            this.$el.append(template.global());\n            if (window.dcp.creatable_family.length === 0) {\n                this.$el.find(\".openDocuments__createDocument\").remove();\n            } else {\n                this.$el.find(\".openDocuments__createDocument__families\").append(template.families({families : window.dcp.creatable_family}));\n            }\n            return this;\n        },\n\n        switchSide: function opd_switchSide()\n        {\n            this.trigger(\"switchSide\");\n        },\n\n        openDocumentIHM : function opd_openDocumentIHM() {\n            this.trigger(\"openDocumentIHM\");\n        },\n\n        openCreation : function opd_openCreation(event) {\n            var $target = $(event.currentTarget);\n            event.preventDefault();\n            this.openDocuments.add({\"initid\": $target.data(\"initid\"), \"viewId\" : \"!coreCreation\"});\n        },\n\n        _addDocument: function opd_addDocument(model)\n        {\n            var viewDocument = new ViewDocumentWidget({model: model}),\n                viewList = new ViewOpenDocumentListElement({model: model});\n            this.$el.find(\".documentList\").append(viewList.render().$el);\n            this.$el.find(\".documentsWrapper\").append(viewDocument.render().$el);\n            model.trigger(\"selected\", model);\n            viewDocument._resize();\n        }\n\n    });\n});\n","/**\n * Created by charles on 10/03/15.\n */\nrequire([\"jquery\",\n    \"underscore\",\n    \"rsp/collections/search\",\n    \"rsp/collections/openDocument\",\n    \"rsp/views/searches\",\n    \"rsp/views/documentList\",\n    \"rsp/views/openDocument\",\n    \"dcpDocument/document\"], function rsp_require($, _, CollectionSearch, CollectionOpenDocument,\n                                                  ViewSearches, ViewDocumentList, ViewOpenDocument)\n{\n\n    \"use strict\";\n\n    var toogleLittleMode = function() {\n        $(\".documentsList\").toggleClass(\"hidden-xs\");\n        $(\".openDocuments\").toggleClass(\"hidden-xs\");\n        $(window).trigger(\"resize\");\n    };\n\n    if (!window.dcp.search_list || window.dcp.search_list.length === 0) {\n        $(\".loading--initial\").hide();\n        $(\".error__wrapper\").show();\n        return;\n    }\n\n    window.dcp = window.dcp || {};\n\n    window.dcp.collections = window.dcp.collections || {};\n    window.dcp.views = window.dcp.views || {};\n\n    window.dcp.collections.searches = new CollectionSearch();\n    window.dcp.collections.openDocuments = new CollectionOpenDocument();\n\n    $(document).ready(function rsp_ready()\n    {\n        window.dcp.views.searches = new ViewSearches({\n            el: $(\".documentsList__searchList\"),\n            collection: window.dcp.collections.searches\n        });\n        window.dcp.views.searches.render();\n        window.dcp.views.documentList = new ViewDocumentList({\n            el: $(\".documentsList__documents\"),\n            collection: window.dcp.collections.searches,\n            openDocuments : window.dcp.collections.openDocuments\n        });\n        window.dcp.views.openDocument = new ViewOpenDocument({\n            el: $(\".openDocuments\"),\n            openDocuments: window.dcp.collections.openDocuments\n        });\n        window.dcp.views.openDocument.listenTo(window.dcp.views.openDocument, \"switchSide\", function() {\n            toogleLittleMode();\n        });\n        window.dcp.views.openDocument.listenTo(window.dcp.views.openDocument, \"openDocumentIHM\", function ()\n        {\n            $(\".documentsList\").addClass(\"hidden-sm\");\n            $(\".openDocuments\").removeClass(\"hidden-sm\");\n            $(window).trigger(\"resize\");\n        });\n        $(\".documentList__switch\").on(\"click\", function() {\n            toogleLittleMode();\n        });\n        window.dcp.views.openDocument.render();\n        window.dcp.views.documentList.render();\n        window.dcp.collections.searches.add(window.dcp.search_list);\n        window.dcp.views.searches.displayDocumentList();\n        $(\".loading--initial\").hide();\n        $(\".content\").show();\n        $(window).trigger(\"resize\");\n    });\n});\ndefine(\"RESPONSIVE_LIST/JS/main\", function(){});\n\n"]}