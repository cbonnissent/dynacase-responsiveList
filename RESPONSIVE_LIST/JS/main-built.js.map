{"version":3,"file":"main-built.js","sources":["RESPONSIVE_LIST/JS/models/document.js","RESPONSIVE_LIST/JS/collections/document.js","RESPONSIVE_LIST/JS/models/search.js","RESPONSIVE_LIST/JS/collections/search.js","RESPONSIVE_LIST/JS/collections/openDocument.js","RESPONSIVE_LIST/JS/views/search.js","RESPONSIVE_LIST/JS/views/searches.js","RESPONSIVE_LIST/JS/views/openDocumentListElement.js","RESPONSIVE_LIST/JS/views/documentWidget.js","RESPONSIVE_LIST/JS/views/openDocument.js","RESPONSIVE_LIST/JS/main.js"],"names":["define","Backbone","Model","extend","idAttribute","defaults","state","viewId","title","icon","dateSelected","initialize","this","set","Date","now","isNew","parse","response","values","properties","attributes","_","model","urlTemplate","template","Collection","url","options","Error","urlBase","slice","offset","keyWord","nbResult","data","resultMax","documents","reset","prototype","apply","arguments","CollectionDocument","listenTo","prepareDocumentList","window","location","pathname","id","collectionInitialized","get","propagateAdd","propagateReset","propagateSync","fetch","currentDocument","trigger","comparator","propagateSelected","selectPrevious","selectNext","selectAnotherOne","each","currentModel","sort","list","sortBy","model1","indexOf","collection","newModel","at","index","length","document","View","tagName","render","$el","attr","addClass","text","SearchView","events","change","_addOne","displayDocumentList","empty","append","_addAll","searchView","find","currentSearch","val","documentModel","className","click","click .documentTab__remove","indicateSelected","toJSON","hidden","selected","event","preventDefault","is","removeClass","remove","destroy","delete","$","setFrameName","on","debounce","bind","_resize","currentView","afterLoaded","initid","revision","withoutResize","documentController","hide","newDocument","parseInt","add","oldDocument","show","documentSelected","getTop","element","getBoundingClientRect","top","height","innerHeight","width","innerWidth","defer","name","ViewOpenDocumentListElement","ViewDocumentWidget","global","families","click .openDocuments__openDocumentList","click .openDocuments__createDocument__familyElement","click .openDocuments__openDocumentCloseAll","openDocuments","_addDocument","openDocumentIHM","renderOpenDocument","nbMaxOpen","isReady","dcp","creatable_family","addPreload","$preload","switchSide","openCreation","$target","currentTarget","preload","viewDocument","el","nb","nbTotal","$targetVisible","$targetOther","viewList","css","closeAll","first","rightBorder","oldMax","$createDocument","_getBorder","Math","floor","position","require","CollectionSearch","CollectionOpenDocument","ViewSearches","ViewDocumentList","ViewOpenDocument","hash","getHash","charAt","toogleLittleMode","toggleClass","search_list","collections","views","searches","ready","documentList","openDocument","submit","test","exec"],"mappings":"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","sourcesContent":["define('rsp/models/document',[\n    \"underscore\",\n    \"backbone\"\n], function (_)\n{\n    \"use strict\";\n\n    return Backbone.Model.extend({\n\n        idAttribute: \"initid\",\n\n        defaults: {\n            state: null,\n            viewId : \"!defaultConsultation\",\n            \"title\" : \"Chargement...\",\n            \"icon\" : false,\n            \"dateSelected\" : 0\n        },\n\n        initialize : function () {\n            this.set(\"dateSelected\", Date.now());\n        },\n\n        isNew: function ()\n        {\n            return true;\n        },\n\n        parse: function (response)\n        {\n            var values = response.properties;\n            values.attributes = response.attributes;\n            return values;\n        }\n    });\n});\n","define('rsp/collections/document',[\n    \"underscore\",\n    \"rsp/models/document\",\n    \"backbone\"\n], function (_, model)\n{\n    \"use strict\";\n\n    var urlTemplate = _.template(\"<%= urlBase %>?slice=<%= slice %>&offset=<%= offset %>&keyword=<%= keyWord %>&fields=document.properties.all,document.attributes\");\n\n    return Backbone.Collection.extend({\n        \"model\": model,\n\n        url: function dc_url()\n        {\n            return urlTemplate(this);\n        },\n\n        initialize: function dc_initialize(values, options)\n        {\n            if (!options.url) {\n                throw new Error(\"the document model needs an url conf\");\n            }\n            this.urlBase = options.url;\n            this.slice = 10;\n            this.offset = 0;\n            this.keyWord = \"\";\n        },\n\n        parse: function dc_parse(response)\n        {\n            this.nbResult = response.data.resultMax;\n            return response.data.documents;\n        },\n\n        reset : function dc_reset() {\n            this.nbResult = null;\n            this.slice = 10;\n            this.offset = 0;\n            return Backbone.Collection.prototype.reset.apply(this, arguments);\n        }\n\n    });\n});\n","define('rsp/models/search',[\n    \"underscore\",\n    \"rsp/collections/document\",\n    \"backbone\"\n], function (_, CollectionDocument)\n{\n    \"use strict\";\n\n    return Backbone.Model.extend({\n\n        idAttribute: \"initid\",\n\n        initialize: function rsp_init()\n        {\n            this.listenTo(this, \"selected\", this.prepareDocumentList);\n            this.set(\"associatedDocumentList\", new CollectionDocument([], {\n                \"url\": window.location.pathname + \"api/v1/rspl/listDocument/\" + this.id\n            }));\n            this.collectionInitialized = false;\n            this.listenTo(this.get(\"associatedDocumentList\"), \"add\", this.propagateAdd);\n            this.listenTo(this.get(\"associatedDocumentList\"), \"reset\", this.propagateReset);\n            this.listenTo(this.get(\"associatedDocumentList\"), \"sync\", this.propagateSync);\n        },\n\n        parse: function (response)\n        {\n            return response.properties;\n        },\n\n        prepareDocumentList: function ()\n        {\n            if (!this.collectionInitialized) {\n                this.get(\"associatedDocumentList\").fetch();\n            }\n        },\n\n        propagateAdd: function propagateAdd(currentDocument)\n        {\n            this.trigger(\"addDocumentList\", this, this.get(\"associatedDocumentList\"), currentDocument);\n        },\n\n        propagateReset: function propagateReset()\n        {\n            this.trigger(\"resetDocumentList\", this, this.get(\"associatedDocumentList\"));\n        },\n\n        propagateSync: function propagateSync()\n        {\n            this.trigger(\"syncDocumentList\", this, this.get(\"associatedDocumentList\"));\n        }\n    });\n});\n","define('rsp/collections/search',[\n    \"underscore\",\n    \"rsp/models/search\",\n    \"backbone\"\n], function (_, model)\n{\n    \"use strict\";\n\n    return Backbone.Collection.extend({\n        \"url\" : window.location.pathname + \"api/v1/rspl/listDocument/DIR_RESPONSIVE_LIST\",\n        \"model\": model,\n\n        parse : function searchCollection_parse(response) {\n            return response.data.documents;\n        }\n    });\n});\n","define('rsp/collections/openDocument',[\n    \"underscore\",\n    \"rsp/models/document\",\n    \"backbone\"\n], function (_, model)\n{\n\n    \"use strict\";\n\n    return Backbone.Collection.extend({\n        \"model\": model,\n\n        comparator : \"dataSelected\",\n\n\n        initialize : function odc__initialize() {\n            this.listenTo(this, \"selected\", this.propagateSelected);\n            this.listenTo(this, \"selectPrevious\", this.selectPrevious);\n            this.listenTo(this, \"selectNext\", this.selectNext);\n            this.listenTo(this, \"destroy\", this.selectAnotherOne);\n        },\n\n        propagateSelected : function odc__selected(model) {\n            this.each(function odc__isSelected(currentModel) {\n                currentModel.set(\"selected\", model.id === currentModel.id);\n                if (model.id === currentModel.id && !currentModel.get(\"visibileInList\")) {\n                    currentModel.set(\"dateSelected\", Date.now());\n                }\n            });\n            this.trigger(\"orderChanged\");\n            this.sort();\n        },\n\n        selectPrevious : function odc__selectPrevious(model) {\n            var list = this.sortBy(function odc_comparator(model1)\n            {\n                return -model1.get(\"dateSelected\");\n            });\n            this.propagateSelected(list[_.indexOf(list, model) - 1]);\n        },\n\n        selectNext: function odc__selectNext(model)\n        {\n            var list = this.sortBy(function odc_comparator(model1)\n            {\n                return -model1.get(\"dateSelected\");\n            });\n            this.propagateSelected(list[_.indexOf(list, model) + 1]);\n        },\n\n        selectAnotherOne : function odc_selectAnotherOne(model, collection, options) {\n            var newModel = this.at(options.index) || this.at(options.index - 1);\n            if (model.get(\"selected\")) {\n                if (newModel) {\n                    newModel.trigger(\"selected\", newModel);\n                }\n            }\n            if (this.length === 0) {\n                window.document.title = \"Les documents\";\n            }\n        }\n    });\n});\n","\ndefine('rsp/views/search',[\n    \"underscore\",\n    \"backbone\"\n], function (_)\n{\n    \"use strict\";\n\n    return Backbone.View.extend({\n\n        tagName: \"option\",\n\n        render: function searchView()\n        {\n            this.$el.data(\"searchId\", this.model.id).attr(\"value\", this.model.id).addClass(\"searchElement\").text(this.model.get(\"title\"));\n            return this;\n        }\n\n    });\n});\n","define('rsp/views/searches',[\n    \"underscore\",\n    \"rsp/views/search\",\n    \"backbone\"\n], function (_, SearchView)\n{\n\n    \"use strict\";\n\n    var template = _.template('<select class=\"form-control documentsList__searchList__select\"></select>');\n\n    return Backbone.View.extend({\n\n        tagName: \"form\",\n\n        events: {\n            \"change\": \"displayDocumentList\"\n        },\n\n        initialize: function searches_initialize(options)\n        {\n            if (!options.collection) {\n                throw new Error(\"You need to associate the searches view with a collection\");\n            }\n            this.collection = options.collection;\n            this.listenTo(this.collection, 'add', this._addOne);\n            this.listenTo(this.collection, 'reset', this.render);\n            this.listenTo(this.collection, 'sync', this.displayDocumentList);\n        },\n\n        render: function searches_render()\n        {\n            this.$el.empty().append(template());\n            this._addAll();\n            return this;\n        },\n\n        _addAll: function ()\n        {\n            this.collection.each(this._addOne);\n        },\n\n        _addOne: function (model)\n        {\n            var searchView = new SearchView({model: model});\n            this.$el.find(\".documentsList__searchList__select\").append(searchView.render().$el);\n        },\n\n        displayDocumentList: function ()\n        {\n            var currentSearch = this.$el.find(\".documentsList__searchList__select\").val(), documentModel = this.collection.get(currentSearch);\n            if (documentModel) {\n                documentModel.trigger(\"selected\", documentModel);\n            }\n        }\n    });\n});\n","define('rsp/views/openDocumentListElement',[\n    \"underscore\",\n    \"backbone\"\n], function (_)\n{\n\n    \"use strict\";\n\n    var template = _.template('<a class=\"documentTab\" href=\"?app=DOCUMENT&id=<%- initid %>\" data-id=\"<%- initid %>\" data-title=\"<%- title %>\">' +\n    '<span class=\"documentTab__text\">' +\n    '  <% if (icon) { %><img src=\"<%- icon %>\" class=\"img-circle documentElement__icon\" /> <% } %> <%- title %>' +\n    '</span>' +\n    '<button type=\"button\" class=\"close documentTab__remove\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>' +\n    '</a>');\n\n    return Backbone.View.extend({\n\n        tagName : \"li\",\n        className : \"openDocuments__tab\",\n\n        events : {\n            \"click\" : \"selected\",\n            \"click .documentTab__remove\" : \"remove\"\n        },\n\n        initialize : function opde_initialize() {\n            this.listenTo(this.model, \"change\", this.render);\n            this.listenTo(this.model, \"change:selected\", this.indicateSelected);\n            this.listenTo(this.model, \"destroy\", this.delete);\n        },\n\n        render : function opde__render(options) {\n            options = options || {};\n            this.$el.empty().append(template(this.model.toJSON()));\n            this.$el.attr(\"title\", this.model.get(\"title\"));\n            if (options.hidden) {\n                this.$el.addClass(\"documentTab__hidden clearfix\");\n            }\n            this.indicateSelected();\n            return this;\n        },\n\n        selected : function opde_selected(event) {\n            event.preventDefault();\n            this.model.trigger(\"selected\", this.model, this.$el.is(\".documentTab__hidden\"));\n        },\n\n        indicateSelected : function opde__indicateSelected() {\n            if (this.model.get(\"selected\")) {\n                this.$el.addClass(\"active\");\n            } else {\n                this.$el.removeClass(\"active\");\n            }\n        },\n\n        remove : function opde__remove() {\n            this.model.destroy();\n        },\n\n        \"delete\" : function opde_delete() {\n            this.$el.remove();\n        }\n\n    });\n});\n","define('rsp/views/documentWidget',[\n    \"jquery\",\n    \"underscore\",\n    \"dcpDocument/document\",\n    \"backbone\"\n], function ($, _)\n{\n\n    \"use strict\";\n\n    return Backbone.View.extend({\n\n        className: \"documentsWrapper__div\",\n\n        initialize: function opde_initialize()\n        {\n            //this.listenTo(this.model, \"change:initid\", this.render);\n            this.listenTo(this.model, \"change:selected\", this.indicateSelected);\n            this.listenTo(this.model, \"change:title\", this.indicateSelected);\n            this.listenTo(this.model, \"change\", this.setFrameName);\n            this.listenTo(this.model, \"destroy\", this.delete);\n            $(window).on(\"resize\", _.debounce(_.bind(this._resize, this), 100));\n        },\n\n        render: function dw_render()\n        {\n            var currentView = this, afterLoaded = _.bind(this.indicateSelected, this);\n            this.$el.document(\"fetchDocument\", {\n                \"initid\": this.model.id,\n                \"viewId\": this.model.get(\"viewId\"),\n                \"revision\" : -1,\n                withoutResize: true\n            });\n            this.$el.document(\"addEventListener\", \"ready\", function (event, document)\n            {\n                currentView.model.set(document);\n                currentView.model.set(\"attributes\", this.documentController(\"getValues\"));\n                currentView.model.trigger(\"reloadDocument\", currentView.model.toJSON());\n                $(this).find(\"header\").hide();\n                afterLoaded();\n            });\n            this.$el.document(\"addEventListener\", \"beforeClose\", function (event, document, newDocument)\n            {\n                var currentDocument = currentView.model.collection.get(newDocument.initid);\n                if (parseInt(newDocument.initid, 10) === parseInt(currentView.model.get(\"initid\"), 10)) {\n                    currentDocument.trigger(\"selected\", currentDocument);\n                    return;\n                }\n                event.preventDefault();\n                if (currentDocument) {\n                    currentDocument.trigger(\"selected\", currentDocument);\n                } else {\n                    currentView.model.collection.add({initid: newDocument.initid, title: \"Chargement\"});\n                }\n            });\n            this.$el.document(\"addEventListener\", \"afterSave\", function (event, document, oldDocument)\n            {\n                // if oldDocument.id => 0 afterCreation save\n                if (oldDocument.id === 0) {\n                    currentView.model.trigger(\"reloadDocumentList\");\n                }\n            });\n            this.$el.document(\"addEventListener\", \"afterDelete\", function (event, document, oldDocument)\n            {\n                currentView.model.trigger(\"removeDocument\", document);\n            });\n            this.setFrameName();\n            return this;\n        },\n\n        indicateSelected: function opde__indicateSelected()\n        {\n            if (this.model.get(\"selected\")) {\n                this.$el.show();\n                window.document.title = this.model.get(\"title\");\n                window.documentSelected = this.$el;\n                this._resize();\n            } else {\n                this.$el.hide();\n            }\n        },\n\n        _resize: function opde_resize()\n        {\n            var currentView = this, getTop = function (element)\n            {\n                element = element[0];\n                return element.getBoundingClientRect().top + 5;\n            };\n            if (this.$el.is(\":visible\")) {\n                this.$el.find(\"iframe\").height($(window).innerHeight() - getTop(this.$el)).width(this.$el.innerWidth() - 1);\n                _.defer(function secondHeightResize()\n                {\n                    currentView.$el.find(\"iframe\").height($(window).innerHeight() - getTop(currentView.$el));\n                }, 50);\n            }\n        },\n\n        \"delete\": function opde_delete()\n        {\n            this.$el.remove();\n        },\n\n        setFrameName: function opde_setFrameName()\n        {\n            var name = \"document_\" + this.model.get(\"initid\") + \"_\" + this.model.get(\"title\");\n            this.$el.find(\"iframe\").attr(\"name\", name);\n        }\n\n    });\n});\n","define('rsp/views/openDocument',[\n    \"jquery\",\n    \"underscore\",\n    \"rsp/views/openDocumentListElement\",\n    \"rsp/views/documentWidget\",\n    \"backbone\",\n    \"bootstrap\"\n], function ($, _, ViewOpenDocumentListElement, ViewDocumentWidget)\n{\n\n    \"use strict\";\n\n    var template = {\n        \"global\": _.template('<ul class=\"nav nav-tabs documentList\">' +\n        '   <li class=\"openDocuments__openDocumentCloseAll pull-right\" title=\"Fermer tous les documents\">' +\n        '       <button type=\"button\" class=\"btn btn-link\"> ' +\n        '           <span class=\"fa fa-times-circle-o\"></span>' +\n        '       </button>' +\n        '   </li>' +\n        '   <li class=\"openDocuments__more pull-right\" style=\"visibility: hidden;\">' +\n        '       <div class=\"btn-group\" title=\"Plus de documents\">' +\n        '           <button type=\"button\" class=\"btn btn-primary dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\">' +\n        '               <span class=\"fa fa-bars\"></span>' +\n        '               +<span class=\"openDocuments__more__number\"></span> <span class=\"caret\"></span>' +\n        '           </button>' +\n        '           <ul class=\"dropdown-menu pull-right openDocuments__more__documents\" role=\"menu\">' +\n        '           </ul>' +\n        '       </div>' +\n        '   </li>' +\n        '   <li class=\"openDocuments__openDocumentList visible-xs visible-sm\">' +\n        '       <button type=\"button\" class=\"btn btn-link\">' +\n        '           <span class=\"fa fa-2x fa-bars\"></span>' +\n        '       </button>' +\n        '   </li>' +\n        '   <li class=\"openDocuments__createDocument\">' +\n        '       <div class=\"btn-group\" title=\"CrÃ©er un document\">' +\n        '           <button type=\"button\" class=\"btn btn-success dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\">' +\n        '               <span class=\"glyphicon glyphicon-plus-sign\"></span>' +\n        '               Nouveau <span class=\"caret\"></span>' +\n        '           </button>' +\n        '           <ul class=\"dropdown-menu openDocuments__createDocument__families\" role=\"menu\">' +\n        '           </ul>' +\n        '       </div>' +\n        '   </li>' +\n        '</ul><div class=\"documentsWrapper\"></div>'),\n        \"families\": _.template('<% _.each(families, function(currentFamily) { %>' +\n        '   <li>' +\n        '       <a class=\"openDocuments__createDocument__familyElement\" href=\"#<%- currentFamily.initid %>\" data-initid=\"<%- currentFamily.initid %>\">' +\n        '          <img src=\"<%- currentFamily.icon %>\" class=\"img-circle documentElement__icon\"><%- currentFamily.title %>' +\n        '      </a>' +\n        '    </li>' +\n        ' <% }); %>')\n    };\n\n    return Backbone.View.extend({\n\n        events: {\n            \"click .openDocuments__openDocumentList\": \"switchSide\",\n            \"click .openDocuments__createDocument__familyElement\": \"openCreation\",\n            \"click .openDocuments__openDocumentCloseAll\": \"closeAll\"\n        },\n\n        initialize: function opd_initialize(options)\n        {\n            if (!options.openDocuments) {\n                throw new Error(\"You need an openDocuments collection\");\n            }\n            this.openDocuments = options.openDocuments;\n            this.listenTo(this.openDocuments, \"add\", this._addDocument);\n            this.listenTo(this.openDocuments, \"selected\", this.openDocumentIHM);\n            this.listenTo(this.openDocuments, \"orderChanged\", this.renderOpenDocument);\n            this.listenTo(this.openDocuments, \"destroy\", this.renderOpenDocument);\n            this.nbMaxOpen = 0;\n            this.isReady = false;\n            $(window).on(\"resize\", _.debounce(_.bind(this._resize, this), 200));\n        },\n\n        render: function opd_render()\n        {\n            this.$el.append(template.global());\n            if (window.dcp.creatable_family.length === 0) {\n                this.$el.find(\".openDocuments__createDocument\").remove();\n            } else {\n                this.$el.find(\".openDocuments__createDocument__families\").append(template.families({families: window.dcp.creatable_family}));\n            }\n            this.isReady = true;\n            this.addPreload();\n            return this;\n        },\n\n        addPreload: function opd_addPreload()\n        {\n            var $preload = $('<div class=\"documentPreload\" style=\"display : none;\"></div>');\n            this.$el.find(\".documentsWrapper\").append($preload);\n            $preload.document();\n        },\n\n        switchSide: function opd_switchSide()\n        {\n            this.trigger(\"switchSide\");\n        },\n\n        openDocumentIHM: function opd_openDocumentIHM()\n        {\n            this.trigger(\"openDocumentIHM\");\n        },\n\n        openCreation: function opd_openCreation(event)\n        {\n            var $target = $(event.currentTarget);\n            event.preventDefault();\n            this.openDocuments.add({\"initid\": $target.data(\"initid\"), \"viewId\": \"!coreCreation\"});\n        },\n\n        _addDocument: function opd_addDocument(model)\n        {\n            var preload, viewDocument;\n            this.renderOpenDocument();\n            preload = this.$el.find(\".documentPreload\");\n            preload.removeClass(\"documentPreload\");\n            viewDocument = new ViewDocumentWidget({model: model, el: preload});\n            viewDocument.render();\n            model.trigger(\"selected\", model);\n            this.addPreload();\n            viewDocument._resize();\n        },\n\n        renderOpenDocument: function opd_renderOpenDocument()\n        {\n            var nb = 0, nbTotal = this.nbMaxOpen,\n                $targetVisible = this.$el.find(\".documentList\"),\n                $targetOther = this.$(\".openDocuments__more__documents\");\n            $targetVisible.find(\".openDocuments__tab\").remove();\n            $targetOther.empty();\n            _.each(this.openDocuments.sortBy(function odc_comparator(model1)\n            {\n                return -model1.get(\"dateSelected\");\n            }), function (model)\n            {\n                var viewList = new ViewOpenDocumentListElement({model: model});\n                if (nb < nbTotal) {\n                    model.set(\"visibileInList\", true);\n                    $targetVisible.append(viewList.render().$el);\n                } else {\n                    model.set(\"visibileInList\", false);\n                    $targetOther.append(viewList.render({hidden : true}).$el);\n                }\n                nb += 1;\n            });\n            if (nb !== 0 && nb > nbTotal) {\n                this.$(\".openDocuments__more\").css(\"visibility\", \"visible\");\n                this.$(\".openDocuments__more__number\").text(nb - nbTotal);\n            } else {\n                this.$(\".openDocuments__more\").css(\"visibility\", \"hidden\");\n            }\n        },\n\n        closeAll: function opd_closeAll()\n        {\n            var model;\n            while (model = this.openDocuments.first()) { // jshint ignore:line\n                model.destroy();\n            }\n        },\n\n        _resize: function opd_resize()\n        {\n            var oldMax = this.nbMaxOpen, rightBorder, $createDocument = this.$el.find(\".openDocuments__createDocument\");\n            if ($createDocument.length === 0) {\n                rightBorder = this._getBorder(this.$el.find(\".documentList\"), \"left\");\n            } else {\n                rightBorder = this._getBorder($createDocument, \"right\");\n            }\n            //compute space between openDocuments__createDocument and openDocuments__more\n            if (this.isReady) {\n                this.nbMaxOpen = Math.floor((this._getBorder(this.$el.find(\".openDocuments__more\"), \"left\") - rightBorder - 10) / 202);\n                if (oldMax !== this.nbMaxOpen) {\n                    this.renderOpenDocument();\n                }\n            }\n        },\n\n        _getBorder: function opd_getBorder(element, position)\n        {\n            element = element[0];\n            return element.getBoundingClientRect()[position];\n\n        }\n\n    });\n});\n\n","/**\n * Created by charles on 10/03/15.\n */\nrequire([\"jquery\",\n    \"underscore\",\n    \"rsp/collections/search\",\n    \"rsp/collections/openDocument\",\n    \"rsp/views/searches\",\n    \"rsp/views/documentList\",\n    \"rsp/views/openDocument\",\n    \"dcpDocument/document\"], function rsp_require($, _, CollectionSearch, CollectionOpenDocument,\n                                                  ViewSearches, ViewDocumentList, ViewOpenDocument)\n{\n\n    \"use strict\";\n\n    var hash, getHash = function getHash()\n    {\n        var hash = location.hash;\n        if (hash.charAt(0) === \"#\") {\n            hash = hash.slice(1);\n        }\n        return hash;\n    };\n\n    var toogleLittleMode = function() {\n        $(\".documentsList\").toggleClass(\"hiddenLittle\");\n        $(\".openDocuments\").toggleClass(\"hiddenLittle\");\n        $(window).trigger(\"resize\");\n    };\n\n    if (!window.dcp.search_list || window.dcp.search_list.length === 0) {\n        $(\".loading--initial\").hide();\n        $(\".error__wrapper\").show();\n        return;\n    }\n\n    window.dcp = window.dcp || {};\n\n    window.dcp.collections = window.dcp.collections || {};\n    window.dcp.views = window.dcp.views || {};\n\n    window.dcp.collections.searches = new CollectionSearch();\n    window.dcp.collections.openDocuments = new CollectionOpenDocument();\n\n    $(document).ready(function rsp_ready()\n    {\n\n        window.dcp.views.searches = new ViewSearches({\n            el: $(\".documentsList__searchList\"),\n            collection: window.dcp.collections.searches\n        });\n        window.dcp.views.searches.render();\n        window.dcp.views.documentList = new ViewDocumentList({\n            el: $(\".documentsList__documents\"),\n            collection: window.dcp.collections.searches,\n            openDocuments : window.dcp.collections.openDocuments\n        });\n        window.dcp.views.openDocument = new ViewOpenDocument({\n            el: $(\".openDocuments\"),\n            openDocuments: window.dcp.collections.openDocuments\n        });\n        window.dcp.views.openDocument.listenTo(window.dcp.views.openDocument, \"switchSide\", function() {\n            toogleLittleMode();\n        });\n        window.dcp.views.openDocument.listenTo(window.dcp.views.openDocument, \"openDocumentIHM\", function ()\n        {\n            $(\".documentsList\").addClass(\"hiddenLittle\");\n            $(\".openDocuments\").removeClass(\"hiddenLittle\");\n            $(window).trigger(\"resize\");\n        });\n        window.dcp.collections.openDocuments.listenTo(window.dcp.collections.openDocuments, \"reloadDocumentList\", function ()\n        {\n            window.dcp.views.documentList.trigger(\"reloadDocumentList\");\n        });\n        window.dcp.collections.openDocuments.listenTo(window.dcp.collections.openDocuments, \"reloadDocument\", function (currentDocument)\n        {\n            window.dcp.views.documentList.trigger(\"reloadDocument\", currentDocument);\n        });\n        window.dcp.collections.openDocuments.listenTo(window.dcp.collections.openDocuments, \"removeDocument\", function (currentDocument)\n        {\n            window.dcp.views.documentList.trigger(\"removeDocument\", currentDocument);\n        });\n        $(\".documentList__switch\").on(\"click\", function() {\n            toogleLittleMode();\n        });\n        $(\".unlog--button\").on(\"click\", function() {\n           $(\"#disconnect\").submit();\n        });\n        window.dcp.views.openDocument.render();\n        window.dcp.views.documentList.render();\n        window.dcp.collections.searches.add(window.dcp.search_list);\n        window.dcp.views.searches.displayDocumentList();\n\n        if (getHash()) {\n            hash = getHash();\n            if (/.*id=.*/.test(hash)) {\n                hash = /.*id=([^&]*)/.exec(hash);\n                hash = hash[1] || false;\n                if (hash) {\n                    window.dcp.collections.openDocuments.add({initid : hash, \"revision\" : -1}, {at: 0});\n                }\n            }\n        }\n\n\n        $(\".loading--initial\").hide();\n        $(\".content\").show();\n        $(window).trigger(\"resize\");\n    });\n});\ndefine(\"RESPONSIVE_LIST/JS/main\", function(){});\n\n"]}